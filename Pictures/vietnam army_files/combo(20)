YUI.add("atics",function(e,n){e.Analytics=(function(){function n(){return document.querySelectorAll("script[src*=adobedtm\\.com]").length<2||!window.s}function a(e){c=e=void 0===e||e,n()&&(c=!1),l("Adobe Analytics enabled: "+c)}function t(e){l("Debugging logging enabled: "+(p=e=void 0===e||e))}function i(e,n){n=n||"CTA Link Clicked",window.appEventData.push({linkInfo:{linkId:e},event:n})}function o(e){if(!n())try{e=e||window.appContext.flapp.get("activeView").name,c&&(!(function(e,n){var a,t={bubbles:!0,cancelable:!0,detail:n};document.createEvent&&document.body.dispatchEvent?((a=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),document.body.dispatchEvent(a)):window.CustomEvent&&document.body.dispatchEvent&&(a=new CustomEvent(e,t),document.body.dispatchEvent(a))})("sendPageView",window.dataLayer),l("Adobe Analytics PageView: "+e+", "+document.location.pathname))}catch(e){l(e)}}function r(){var n=window.appContext.flapp.get("activeView");l("learning"),window.dataLayer={page:{pageInfo:{pageID:"",pageName:"",destinationURL:"",referringURL:"",onsiteSearchTerm:"",language:"",country:"",geoRegion:"",author:"",pageType:"",safetyLevel:""}},product:[],events:[],cart:{},transaction:{transactionID:"",total:{basePrice:0,voucherCode:"",voucherDiscount:0,currency:"",taxRate:0,shipping:0,shippingMethod:"",priceWithTax:0,transactionTotal:0,item:[]}},user:{profile:{profileInfo:{profileID:"",userName:"",language:"",intl:"",signedIn:""},address:"",social:{facebook:"",facebookInfo:"",twitter:"",twitterInfo:""},segment:{isNewRegistration:null,isUserNewCustomer:null,isLoggedIn:null,customerClassDimension:"",visitorLifetimeValue:0}}},buckets:{}};try{var a=window.appContext&&window.appContext.getViewer?window.appContext.getViewer():null;a&&(a.signedIn?(window.dataLayer.user.profile.profileInfo.signedIn="signedIn",window.dataLayer.user.profile.profileInfo.profileID=a.nsid,window.dataLayer.user.profile.profileInfo.intl=a.intl,window.dataLayer.user.profile.segment.customerClassDimension=a.isPro?"pro":"free"):window.dataLayer.user.profile.profileInfo.signedIn="signedOut"),window.navigator&&window.navigator.language&&(window.dataLayer.user.profile.profileInfo.language=window.navigator.language),window.dataLayer.page.pageInfo.pageID=e.murmurhash(document.title,document.title+" insecure hawaiian volcano salt"),window.dataLayer.page.pageInfo.pageName=n.name,window.dataLayer.page.pageInfo.destinationURL=document.location.href,window.dataLayer.buckets.exploreVersion=window.appContext.flipper.isFlipped("enable-explore-v2-api")?"2":"1"}catch(e){l("learn() blew up.",e)}}function d(n,a){e.Object.setValue(window.dataLayer,n.split("."),a)}function l(e,n){p&&console.info("[Analytics] ",e,n)}var s,c=!1,p=!1;return s||(window.appEventData=window.appEventData||[],e.one("body").delegate("click",function(e){i(e.target.ancestor("[data-link-id]",!0).getAttribute("data-link-id"))},"a[data-link-id]"),s={sendPageView:o,sendClick:i,enableAdobeAnalytics:a,enableDebugging:t,learn:r,setDataLayerProp:d}),s})()},"@VERSION@",{requires:["murmurhash"],affinity:"client"});YUI.add("client-app",function(e,n){function i(){v=!1}function t(n){var i,t,r=window.location,a=window.history,o=!1;if(r.search&&a.replaceState&&(i=e.QueryString.parse(r.search.replace("?","")),n.forEach(function(e){e in i&&(delete i[e],o=!0)}),o)){t=e.QueryString.stringify(i);try{a.replaceState({},"",r.pathname+(t?"?"+t:""))}catch(e){}}}function r(e,n){return new n.Promise(function(i,t){n.use(e,function(e,n){n&&"success"in n?n.success?i(e):t(n.msg):t("Y.use: no status provided")})})}function a(n){var i,t,r,a,o=[],s=["flickr.photos.addView","flickr.groups.updateViewDate","flickr.photos.getPhotos","flickr.people.addView","flickr.photosets.addView"];if(g.getViewCounter().flushQueue(),g.uploadIsInProgress())a=this.intlMessage({intlName:"client-app.UPLOAD_IN_PROGRESS"});else{for(i in g.writeAPICallsMadeOnThisPage)(t=g.writeAPICallsMadeOnThisPage[i]).completed||o.push(t);o.length&&(o.every(function(e){return-1!==s.indexOf(e.methodName)})||(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod?(r=o.map(function(e){return e.methodName}).join(", "),a=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})+" In progress API Methods: "+r):a=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})))}return e.Storage.Instance.clear(),a&&((n||window.event).returnValue=a),a}function o(n){if(!v)return window.location=n.url,void n.halt();g.setClientSideRouted(!0),g.setPreviousLocation(),g.updateModelRefetchState(n.url,n.originEvent&&n.originEvent.currentTarget&&n.originEvent.currentTarget.hasClass("do-not-evict")),g.clearWriteAPICallCache(),g.setGPCredentials(null),e.loaderBar.start(),g.adManager.isEnabled()&&g.adManager.currentlyShowingAd&&g.adManager.adIsUnloading(),g.flipper.isFlipped("enable-prebid-ads")&&asc.cmd.push(asc.destroy),g.getKeyboardManager().resetCurrentKeyEventScope(),e.Object.each(g.modelRegistries,function(e,n){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),m=!0}function s(){e.UA.chrome>0&&(window.scrollTo(window.scrollX,window.scrollY+1),window.scrollTo(window.scrollX,window.scrollY-1))}function c(n){e.Object.each(g.modelRegistries,function(e,n){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),e.fire("close-dialogs"),"popstate"===n.src&&s(),"popstate"!==n.src||w.hasRoute(w.getPath())||e.Object.isEmpty(n.newVal)||w.navigate(w.getPath()),g.getViewCounter().flushQueue({resetDuplicateTracking:!0}),m||g.updateModelRefetchState(),m=!1}function l(e){w.set("previousView",e.prevVal)}function u(n,i,t){var r=e.one(document.elementFromPoint(i,t)),a=r.ancestor("[data-scroll-section]",!0);if(a)return a.getAttribute("data-scroll-section");var o,s=r.ancestor(".view",!0);if(s){if((o=s.getAttribute("class").match(/[\S]+-view/)[0])===n.name&&i===window.innerWidth/2){var c=u(n,i/2,t);return c!==n.name?c:u(n,i+i/2,t)}return o}}function d(n){var i=this.get("activeView");if(void 0===i.getViewDataFromHistory("referrer")&&i.setViewDataOnHistory("referrer",g.getPreviousURL()),e.Analytics&&(e.Analytics.learn(),i.updateDataLayer(),e.Analytics.sendPageView()),e.DeferImages.update(),g.adManager.setAdCouldBeShown(!1),e.config.win.onappclientnav)try{e.config.win.onappclientnav()}catch(n){}e.Accessibility.manageFocusOutlines(i),void 0!==window._sift&&window._sift.push&&window._sift.push(["_trackPageview"])}function f(n){return new e.Promise(function(i,r){var a=setTimeout(function(){r(new Error("Initial View Timeout"))},12e3);n.params.appContext=g,w.showContent(e.one("#content > .view"),{view:{name:n.name,config:n.params}},function(n){e.one("body").removeClass("dark-loader"),n._params&&(n._params.keyEventScope=n.name+n._yuid),n.setViewDataOnHistory("referrer",document.referrer),n.set("isRootView",!0),n.initialize().then(function(){e.Analytics&&(e.Analytics.learn(),e.Analytics.enableAdobeAnalytics(window.appContext.flipper.isFlipped("enable-adobe-analytics")),n.updateDataLayer(),e.Analytics.sendPageView()),g.getKeyboardManager().setCurrentKeyEventScope(n.name+n._yuid),s(),e.DeferImages.init(),e.Accessibility.manageFocusOutlines(n),t(["campaignID","linkID"]),(function(){if(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod){var n=e.all("[data-view-signature]");n.size()&&h.warn("View signature mismatches detected! A view likely modified the `params` object directly.",{views:n.getDOMNodes()})}})(),clearTimeout(a),i()}).then(null,function(e){throw h.error("There was a problem initializing or activating the view.",{err:e}),r(),e})}),w.before("navigate",o),w.before("activeViewChange",l),e.on("history:change",c),w.after("activeViewChange",d)})}function p(n,i,t,r){var a={};return e.Views&&e.Views[n]&&(a[n]={type:e.Views[n],preserve:!1}),w=new e.App({serverRouting:!0,viewContainer:"#content",container:"#content",linkSelector:":not(.server-only-link):not([target=_blank])",scrollToTop:!1,views:a}),new e.FlickrRouter(w,e.config.flickr.routes),r.auth=i,r.flapp=w,g=(function(n){return window.appContext=new e.AppContext(n),window.appContext})(r),g.routeTiming=r.routeTiming,g.routeConfig=r.routeConfig,e.mix(e.Node.DOM_EVENTS,{transitionend:!0,webkitTransitionEnd:!0}),g.flipper.isFlipped("enable-prebid-ads")&&e.use("prbd"),e.ClientTransport.authorize(g),window.addEventListener("unload",function(n){e.ClientTransport.unloading=!0}),window.addEventListener("load",function(n){e.ClientTransport.unloading=!1}),g.modelImportExport.importAll(t)}var g,w,h=require("hermes-core/flog")(n),m=!1,v=e.config.flickr.clientNavEnabled;e.ClientApp={init:function(n){if(void 0===n)return e.Promise.reject({message:"Invalid config object supplied, was undefined."});var o,s,c=n.initialView,l=n.modelExport,u=n.auth,d=this;return u||i(),o=u&&n.auth.signedIn?n.auth.csrf:null,e.config.flickr.csrf.token=o,e.config.flickr.requestConfig={auth:u},n.params.routeTiming=n.routeTiming,n.params.routeConfig=n.routeConfig,t(e.config.flickr.routing_params),window.location.search&&window.location.search.match(/yc=/)&&(s=e.QueryString.parse(window.location.search.replace("?","")),e.config.flickr.ycParam=s.yc),e.transportFactory=function(n,i){return new e.ClientTransport(i)},r(c.name,e).then(function(){return p(c.name,u,l,n.params)}).then(function(){return f(c)}).then(function(){!(function(){var n=e.one("link#rollup-css");n?n.get("sheet")?(g.isCSSLoaded=!0,e.fire("css-loaded")):n.once("load",function(){g.isCSSLoaded=!0,e.fire("css-loaded")}):(g.isCSSLoaded=!0,e.fire("css-loaded"))})(),e.AnchorRepositioner.jumpTo(),e.config.win.addEventListener("beforeunload",a.bind(d))}).then(e.config.win.onappinit)},beforeUnload:a,beforeNavigate:o,_loadInitialView:r,langBundles:["client-app"],disableClientNav:i,getScrollSection:u},e.rapidTracker={beacon:function(){}},e.mix(e.ClientApp,e.Localizable)},"@VERSION@",{requires:["app-base","app-content","router","app-context","client-transport","flickr-router","handlebars-helpers","loader-bar","murmurhash","node","site-key","flickr-promise","global-events","querystring-parse-simple","querystring-stringify-simple","storage-helper","keyboard-manager","dom","overflow-helper","defer-images","accessibility","anchor-repositioner","atics"],affinity:"client",langBundles:["client-app"]});YUI.add("csrf-updater",function(t){"use strict";var e=require("hermes-core/flog")("csrf");t.CsrfUpdater=function(t){this.flickrAPI=t,this._tasks=[]},t.CsrfUpdater.prototype.getKey=function(){return t.config.flickr.csrf.token||null},t.CsrfUpdater.prototype.isExpired=function(){return!!t.config.flickr.csrf.token&&Date.now()/1e3>t.config.flickr.csrf.csrfExpiresAt},t.CsrfUpdater.prototype.invalidate=function(t){var e=this._lastStored||0;if(t||(t=0),!(t<e))return this.setExpired()},t.CsrfUpdater.prototype.setExpired=function(){return t.config.flickr.csrf.csrfExpiresAt=0},t.CsrfUpdater.prototype.store=function(e,r){this._lastStored=Date.now(),r||(r=Math.floor(this._lastStored/1e3)),t.config.flickr.csrf.token=e,t.config.flickr.csrf.csrfFetched=r,t.config.flickr.csrf.csrfExpiresAt=r+t.config.flickr.csrf.fetch_interval,this.drainQueue()},t.CsrfUpdater.prototype.pushToQueue=function(t){this._tasks.push(t)},t.CsrfUpdater.prototype.drainQueue=function(){for(;this._tasks.length;)this._tasks.shift().resolve()},t.CsrfUpdater.prototype.hasQueuedTasks=function(){return!!this._tasks.length},t.CsrfUpdater.prototype.scheduleFutureFetch=function(){t.config.flickr.csrf.token&&(this._timerFutureFetch=setTimeout(this.fetch.bind(this),1e3*t.config.flickr.csrf.fetch_interval))},t.CsrfUpdater.prototype.scheduleRetry=function(e){var r=this,s=this._fetchRuns>4?1:Math.pow(2,(this._fetchRuns||1)-1)/10,i=t.config.flickr.csrf.retry_interval*s;clearTimeout(this._timerRetry),this._timerRetry=setTimeout(function(){r._timerRetry=null,r.fetch(e)},1e3*i)},t.CsrfUpdater.prototype.fetch=function(r){var s=this,i=s.hasQueuedTasks();if(clearTimeout(this._timerFutureFetch),YUI.Env.isServer){if(!r&&(r=new t.Promise(function(t,e){this.resolve=t,this.reject=e}),this.pushToQueue(r),i))return r;this._fetchRuns||(this._fetchRuns=0),this._fetchRuns++,this.flickrAPI.fetchCsrf().then(function(t){var i=t.token;if(!t.token)return e.error("Failed to fetch csrf token",t),void s.scheduleRetry(r);e.log("Received new csrf token",t),s._fetchRuns=0,s.store(i),s.scheduleFutureFetch()},function(t){e.error("Failed to fetch csrf token",{err:t}),s.scheduleRetry(r)})}else t.ClientApp&&t.ClientApp.disableClientNav();return r}},"@VERSION@",{requires:["client-app"]});YUI.add("hermes-template-photo-page-scrappy",function(e,t){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,o){var n=null!=t?t:{},u=a.helperMissing,r=e.escapeExpression;return r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["global-nav-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["photo-well-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["sub-photo-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["signup-footer-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"+r((a.outlet||t&&t.outlet||u).call(n,null!=t?t["footer-full-view"]:t,{name:"outlet",hash:{},data:o}))+"\n"},useData:!0}),l={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(l[t]=a)}),e.Template.register("hermes/photo-page-scrappy",function(t,o){return o=o||{},o.partials=o.partials?e.merge(l,o.partials):l,a(t,o)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("signin-helper",function(e){function n(n,o){e.FlickrStorage.store(n,o)}function o(n,o){var i,t;o&&o.withPopup?(i=e.config.win.open(r(o),"_blank","height=650,resizable=1,scrollbars=1,location=yes"),t=setInterval(function(){i.closed&&(clearInterval(t),window.location.reload())},1e3)):e.config.win.location=r(o)}function r(n){(n=n||{}).closeWhenDone&&(n.postLoginUrl=e.url("/photo_grease_postlogin.gne",{protocol:!1}));var o=n.postLoginUrl||e.config.win.location.href;return(n.url||e.url("/signin/",{protocol:!1}))+"?redir="+encodeURIComponent(o)}function i(n,o){var r=(o=o||{}).postLoginUrl||e.config.win.location.href,i=o.url||e.url("/signup/",{protocol:!1});e.config.win.location=i+"?redir="+encodeURIComponent(r)}e.FlickrStorage={_storageKey:"flickrStorage",store:function(n,o){try{var r=[];e.StorageHelper.hasEntries(this._storageKey)&&(r=this.retrieve()),r.push({key:n,value:o}),e.StorageHelper.setItem(this._storageKey,JSON.stringify(r))}catch(e){}},retrieve:function(){var n={};try{n=JSON.parse(e.StorageHelper.getItem(this._storageKey))}catch(e){}return n},remove:function(){try{e.StorageHelper.remove(this._storageKey)}catch(e){}},hasEntries:function(){return e.StorageHelper.hasEntries(this._storageKey)}},e.SigninHelper={savePreLoginAction:n,addPendingFave:function(e,r){n("fave",e),o(0,r)},addPendingComment:function(e,n){o(0,n)},addPendingShare:function(e,r){n("share",e),o(0,r)},addPendingFollow:function(e,r){n("follow",e),o(0,r)},addPendingJoinGroup:function(e,r){n("joingroup",e),o(0,r)},addPendingDownload:function(e,r){n("download",e),o(0,r)},checkPendingQueue:function(n){var o,r,i=[];if(n){if(e.FlickrStorage.hasEntries()){o=e.FlickrStorage.retrieve();for(r in o)(function(e,n){var o=n.key,r=n.value;switch(o){case"fave":return(function(e,n){var o=n.id;e.getModelRegistry("photo-engagement-models").then(function(e){var n=e.proxy(o);n.registry.addAsFave(o)&&n.remoteUpdate()})})(e,r),!0;case"share":return!1}})(n,o[r])||i.push(o[r])}return e.FlickrStorage.remove(),i}},_redirectToSignin:o,_redirectToSignUp:i,_getSigninUrl:r,signUpPendingFave:function(e,o){n("fave",e),i(0,o)},signUpPendingComment:function(e,n){i(0,n)},signUpPendingFollow:function(e,o){n("follow",e),i(0,o)},signUpPendingJoinGroup:function(e,o){n("joingroup",e),i(0,o)},signUpPendingDownload:function(e,o){n("download",e),i(0,o)}}},"@VERSION@",{requires:["url","storage-helper"]});YUI.add("safety-level-helper",function(e){e.SafetyHelper={getSafetyLevelString:function(e,r){return e=parseInt(e),"search"===r&&(e-=1),1===e?"moderate":2===e?"restricted":"safe"}}},"@VERSION@",{requires:[]});YUI.add("yui-throttle",function(e,t){
/*! Based on work by Simon Willison: http://gist.github.com/292562 */
;e.throttle=function(t,n){n=n?n:e.config.throttleTime||150;if(n===-1)return function(){t.apply(this,arguments)};var r=e.Lang.now();return function(){var i=e.Lang.now();i-r>n&&(r=i,t.apply(this,arguments))}}},"3.16.0",{requires:["yui-base"]});
YUI.add("hermes-template-photo-well-scrappy",function(a,e){var l=a.Template.Handlebars.revive({1:function(a,e,l,n,t){return" enable-zoom"},3:function(a,e,l,n,t){return" no-click"},5:function(a,e,l,n,t){return" is-hidden"},7:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["prev-url"]||(null!=e?e["prev-url"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"prev-url",hash:{},data:t}):i)},9:function(a,e,l,n,t){return"#"},11:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["prev-title"]||(null!=e?e["prev-title"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"prev-title",hash:{},data:t}):i)},13:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["next-url"]||(null!=e?e["next-url"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"next-url",hash:{},data:t}):i)},15:function(a,e,l,n,t){var i;return a.escapeExpression("function"==typeof(i=null!=(i=l["next-title"]||(null!=e?e["next-title"]:e))?i:l.helperMissing)?i.call(null!=e?e:{},{name:"next-title",hash:{},data:t}):i)},17:function(a,e,l,n,t){var i=null!=e?e:{},r=l.helperMissing,s=a.escapeExpression;return"\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["photo-sidebar-toggle-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["attribution-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["people-notes-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t\t"+s((l.outlet||e&&e.outlet||r).call(i,null!=e?e["photo-engagement-view"]:e,{name:"outlet",hash:{},data:t}))+"\n"},19:function(a,e,l,n,t){var i,r=null!=e?e:{},s=l.helperMissing,o=a.escapeExpression;return"\t\t<a class='entry-type do-not-evict' href='"+o("function"==typeof(i=null!=(i=l.entryURL||(null!=e?e.entryURL:e))?i:s)?i.call(r,{name:"entryURL",hash:{},data:t}):i)+'\'><div class="icon"></div> '+o("function"==typeof(i=null!=(i=l.backToLabel||(null!=e?e.backToLabel:e))?i:s)?i.call(r,{name:"backToLabel",hash:{},data:t}):i)+"</a>\n"},21:function(a,e,l,n,t){var i,r=null!=e?e:{},s=l.helperMissing,o=a.escapeExpression;return'\t\t<a href="'+o("function"==typeof(i=null!=(i=l.similaritySearchURL||(null!=e?e.similaritySearchURL:e))?i:s)?i.call(r,{name:"similaritySearchURL",hash:{},data:t}):i)+'" class="similarity-search-link" data-track="photoPageSimilaritySearchClick" title="'+o((l.intlMessage||e&&e.intlMessage||s).call(r,{name:"intlMessage",hash:{intlName:"common.SEARCH_FOR_SIMILAR_PHOTOS"},data:t}))+'"><svg class="icon icon-search"><use xlink:href="#icon-search"></use></svg></a>\n'},23:function(a,e,l,n,t){return"\t\t"+a.escapeExpression((l.outlet||e&&e.outlet||l.helperMissing).call(null!=e?e:{},null!=e?e["photo-limit-overlay-view"]:e,{name:"outlet",hash:{},data:t}))+"\n"},compiler:[7,">= 4.0.0"],main:function(a,e,l,n,t){var i,r,s=null!=e?e:{},o=l.helperMissing,u=a.escapeExpression;return'<div class="height-controller'+(null!=(i=l.if.call(s,null!=e?e.enableZoom:e,{name:"if",hash:{},fn:a.program(1,t,0),inverse:a.noop,data:t}))?i:"")+'" style="height: '+u("function"==typeof(r=null!=(r=l.height||(null!=e?e.height:e))?r:o)?r.call(s,{name:"height",hash:{},data:t}):r)+'px;">\n\n\t<a class="navigate-target navigate-prev'+(null!=(i=l.if.call(s,null!=e?e["prev-is-not-clickable"]:e,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.noop,data:t}))?i:"")+(null!=(i=l.if.call(s,null!=e?e["is-hidden"]:e,{name:"if",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?i:"")+'" href="'+(null!=(i=l.if.call(s,null!=e?e["prev-url"]:e,{name:"if",hash:{},fn:a.program(7,t,0),inverse:a.program(9,t,0),data:t}))?i:"")+'" title="'+(null!=(i=l.if.call(s,null!=e?e["prev-url"]:e,{name:"if",hash:{},fn:a.program(11,t,0),inverse:a.noop,data:t}))?i:"")+'" data-track="prevPhotoButtonClick" data-action="ad" style="height: '+u("function"==typeof(r=null!=(r=l.navHeight||(null!=e?e.navHeight:e))?r:o)?r.call(s,{name:"navHeight",hash:{},data:t}):r)+'px;"><span class="hide-text">&larr;</span></a>\n\n\t'+u((l.outlet||e&&e.outlet||o).call(s,null!=e?e["photo-well-media-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\t"+u((l.outlet||e&&e.outlet||o).call(s,null!=e?e["photo-notes-scrappy-view"]:e,{name:"outlet",hash:{},data:t}))+'\n\n\t<a class="navigate-target navigate-next'+(null!=(i=l.if.call(s,null!=e?e["next-is-not-clickable"]:e,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.noop,data:t}))?i:"")+(null!=(i=l.if.call(s,null!=e?e["is-hidden"]:e,{name:"if",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?i:"")+'" href="'+(null!=(i=l.if.call(s,null!=e?e["next-url"]:e,{name:"if",hash:{},fn:a.program(13,t,0),inverse:a.program(9,t,0),data:t}))?i:"")+'"  title="'+(null!=(i=l.if.call(s,null!=e?e["next-url"]:e,{name:"if",hash:{},fn:a.program(15,t,0),inverse:a.noop,data:t}))?i:"")+'" data-track="nextPhotoButtonClick" data-action="ad" style="height: '+u("function"==typeof(r=null!=(r=l.navHeight||(null!=e?e.navHeight:e))?r:o)?r.call(s,{name:"navHeight",hash:{},data:t}):r)+'px;"><span class="hide-text">&rarr;</span></a>\n\n'+(null!=(i=l.unless.call(s,null!=e?e["is-ad"]:e,{name:"unless",hash:{},fn:a.program(17,t,0),inverse:a.noop,data:t}))?i:"")+"\n"+(null!=(i=l.unless.call(s,null!=e?e.hideBackToLink:e,{name:"unless",hash:{},fn:a.program(19,t,0),inverse:a.noop,data:t}))?i:"")+"\n"+(null!=(i=l.if.call(s,null!=e?e.similaritySearchURL:e,{name:"if",hash:{},fn:a.program(21,t,0),inverse:a.noop,data:t}))?i:"")+"\n\t"+u((l.outlet||e&&e.outlet||o).call(s,null!=e?e["context-slider-view"]:e,{name:"outlet",hash:{},data:t}))+"\n\n"+(null!=(i=l.if.call(s,null!=e?e.showPhotoLimitOverlay:e,{name:"if",hash:{},fn:a.program(23,t,0),inverse:a.noop,data:t}))?i:"")+"</div>\n"},useData:!0}),n={};a.Array.each([],function(e){var l=a.Template.get("hermes/"+e);l&&(n[e]=l)}),a.Template.register("hermes/photo-well-scrappy",function(e,t){return t=t||{},t.partials=t.partials?a.merge(n,t.partials):n,l(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-page-right-size-express",function(t,e){var n=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,o){var a,h=null!=e?e:{},l=n.helperMissing,r=t.escapeExpression;return'\n<script type="text/javascript" nonce="'+r("function"==typeof(a=null!=(a=n.cspNonce||(null!=e?e.cspNonce:e))?a:l)?a.call(h,{name:"cspNonce",hash:{},data:o}):a)+'">\n\n\t(function(){\n\n\t\tvar PADDING_HORIZONTAL = 40;\n\n\t\twindow.getPhotoWellHeight = function () {\n\n\t\t\tvar minHeight = 500,\n\t\t\t    winWidth = window.innerWidth,\n\t\t\t    winHeight = window.innerHeight - 50,\n\t\t\t    ratioNarrow = 1,\n\t\t\t    ratioRegular = 2.3,\n\t\t\t    ratioTransitional = 2.75,\n\t\t\t    idealSubphotoHeight = 120,\n\t\t\t    breakHeightNarrow = (winWidth / ratioNarrow) + idealSubphotoHeight,\n\t\t\t    breakHeightRegular = (winWidth / ratioRegular) + idealSubphotoHeight,\n\t\t\t    breakHeightTransitional = winWidth / ratioTransitional,\n\t\t\t    newPhotoWellHeight;\n\n\t\t\tif (winHeight > breakHeightNarrow) {\n\n\t\t\t\tnewPhotoWellHeight = winWidth / ratioNarrow;\n\n\t\t\t} else if (winHeight > breakHeightRegular) {\n\n\t\t\t\tnewPhotoWellHeight = winHeight - idealSubphotoHeight;\n\n\t\t\t} else if (winHeight > breakHeightTransitional) {\n\n\t\t\t\tnewPhotoWellHeight = winHeight - idealSubphotoHeight + idealSubphotoHeight * (winHeight - breakHeightRegular) / (breakHeightTransitional - breakHeightRegular);\n\n\t\t\t} else {\n\n\t\t\t\tnewPhotoWellHeight = winHeight;\n\n\t\t\t}\n\n\t\t\treturn Math.max(minHeight, Math.round(newPhotoWellHeight));\n\n\t\t}\n\n\t\tfunction domReady () {\n\n\t\t\ttry {\n\n\t\t\t\tif (document.getElementsByClassName("low-res-photo")[0]) {\n\n\t\t\t\t\tvar photoWellView = document.getElementsByClassName("photo-well-scrappy-view")[0],\n\t\t\t\t\t    heightController = photoWellView.getElementsByClassName("height-controller")[0],\n\t\t\t\t\t    photoWellMediaView = document.getElementsByClassName("photo-well-media-scrappy-view")[0],\n\t\t\t\t\t    lowResImageElement = photoWellMediaView.getElementsByClassName("low-res-photo")[0],\n\t\t\t\t\t    photoWidth = '+r("function"==typeof(a=null!=(a=n.photoWidth||(null!=e?e.photoWidth:e))?a:l)?a.call(h,{name:"photoWidth",hash:{},data:o}):a)+",\n\t\t\t\t\t    photoHeight = "+r("function"==typeof(a=null!=(a=n.photoHeight||(null!=e?e.photoHeight:e))?a:l)?a.call(h,{name:"photoHeight",hash:{},data:o}):a)+',\n\t\t\t\t\t    photoAspectRatio = photoWidth / photoHeight,\n\t\t\t\t\t    photoWellHeight = window.getPhotoWellHeight(),\n\t\t\t\t\t    photoWellMediaViewPadding = {\n\t\t\t\t\t        top: parseInt(getComputedStyle(photoWellMediaView)[\'paddingTop\'].match(/[0-9]+/)[0], 10),\n\t\t\t\t\t        right: PADDING_HORIZONTAL,\n\t\t\t\t\t        bottom: parseInt(getComputedStyle(photoWellMediaView)[\'paddingBottom\'].match(/[0-9]+/)[0], 10),\n\t\t\t\t\t        left: PADDING_HORIZONTAL\n\t\t\t\t\t    },\n\t\t\t\t\t    canvasSize = {\n\t\t\t\t\t        height: photoWellHeight - photoWellMediaViewPadding.top - photoWellMediaViewPadding.bottom,\n\t\t\t\t\t        width: window.innerWidth - photoWellMediaViewPadding.left - photoWellMediaViewPadding.right\n\t\t\t\t\t    };\n\n\t\t\t\t\theightController.style.height = photoWellHeight + "px";\n\n\t\t\t\t\tif (photoWidth <= canvasSize.width && photoHeight <= canvasSize.height) {\n\t\t\t\t\t\tlowResImageElement.style.height = photoHeight + "px";\n\t\t\t\t\t\tlowResImageElement.style.width = photoWidth + "px";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (photoAspectRatio < 1 || Math.round(canvasSize.width / photoAspectRatio) > canvasSize.height) {\n\t\t\t\t\t\t\tlowResImageElement.style.height = canvasSize.height + "px";\n\t\t\t\t\t\t\tlowResImageElement.style.width = Math.round(canvasSize.height * photoAspectRatio) + "px";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlowResImageElement.style.height = Math.round(canvasSize.width / photoAspectRatio) + "px";\n\t\t\t\t\t\t\tlowResImageElement.style.width = canvasSize.width + "px";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tif (window.sendRequest) {\n\t\t\t\t\twindow.sendRequest(\'flickr.hermes.photoDimensionCorrectionError\', \'There was a JS error when trying to correct a server rendered photo.\');\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (document.readyState != \'loading\'){\n\t\t\tdomReady();\n\t\t} else {\n\t\t\tdocument.addEventListener(\'DOMContentLoaded\', domReady);\n\t\t}\n\n\t}());\n\n<\/script>\n'},useData:!0}),i={};t.Array.each([],function(e){var n=t.Template.get("hermes/"+e);n&&(i[e]=n)}),t.Template.register("hermes/photo-page-right-size-express",function(e,o){return o=o||{},o.partials=o.partials?t.merge(i,o.partials):i,n(e,o)})},"@VERSION@",{requires:["template-base","handlebars-base"]});